!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";(function(n,o){var i;function r(e,t){if(!e)throw"First parameter is required.";t=new a(e,t=t||{type:"video"});var n=this;function o(n){n&&(t.initCallback=function(){n(),n=t.initCallback=null});var o=new s(e,t);(f=new o(e,t)).record(),l("recording"),t.disableLogs||console.log("Initialized recorderType:",f.constructor.name,"for output-type:",t.type)}function i(e){if(e=e||function(){},f){if("paused"===n.state)return n.resumeRecording(),void setTimeout(function(){i(e)},1);"recording"===n.state||t.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',n.state),t.disableLogs||console.log("Stopped recording "+t.type+" stream."),"gif"!==t.type?f.stop(o):(f.stop(),o()),l("stopped")}else m();function o(o){if(f){Object.keys(f).forEach(function(e){"function"!=typeof f[e]&&(n[e]=f[e])});var i=f.blob;if(!i){if(!o)throw"Recording failed.";f.blob=i=o}if(i&&!t.disableLogs&&console.log(i.type,"->",w(i.size)),e){var r=p.createObjectURL(i);"function"==typeof e.call?e.call(n,r):e(r)}t.autoWriteToDisk&&c(function(e){var n={};n[t.type+"Blob"]=e,M.Store(n)})}else"function"==typeof e.call?e.call(n,""):e("")}}function d(e){postMessage((new FileReaderSync).readAsDataURL(e))}function c(e,n){if(!e)throw"Pass a callback function over getDataURL.";var o=n?n.blob:(f||{}).blob;if(!o)return t.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout(function(){c(e,n)},1e3);if("undefined"==typeof Worker||navigator.mozGetUserMedia){var i=new FileReader;i.readAsDataURL(o),i.onload=function(t){e(t.target.result)}}else{var r=function(e){var t=p.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(t);return p.revokeObjectURL(t),n}(d);r.onmessage=function(t){e(t.data)},r.postMessage(o)}}function u(e){e=e||0,"paused"!==n.state?"stopped"!==n.state&&(e>=n.recordingDuration?i(n.onRecordingStopped):(e+=1e3,setTimeout(function(){u(e)},1e3))):setTimeout(function(){u(e)},1e3)}function l(e){n&&(n.state=e,"function"==typeof n.onStateChanged.call?n.onStateChanged.call(n,e):n.onStateChanged(e))}var f,h='It seems that recorder is destroyed or "startRecording" is not invoked for '+t.type+" recorder.";function m(){!0!==t.disableLogs&&console.warn(h)}var g={startRecording:function(i){return i&&(t=new a(e,i)),t.disableLogs||console.log("started recording "+t.type+" stream."),f?(f.clearRecordedData(),f.record(),l("recording"),n.recordingDuration&&u(),n):(o(function(){n.recordingDuration&&u()}),n)},stopRecording:i,pauseRecording:function(){f?"recording"===n.state?(l("paused"),f.pause(),t.disableLogs||console.log("Paused recording.")):t.disableLogs||console.warn("Unable to pause the recording. Recording state: ",n.state):m()},resumeRecording:function(){f?"paused"===n.state?(l("recording"),f.resume(),t.disableLogs||console.log("Resumed recording.")):t.disableLogs||console.warn("Unable to resume the recording. Recording state: ",n.state):m()},initRecorder:o,setRecordingDuration:function(e,t){if(void 0===e)throw"recordingDuration is required.";if("number"!=typeof e)throw"recordingDuration must be a number.";return n.recordingDuration=e,n.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){n.onRecordingStopped=e}}},clearRecordedData:function(){f?(f.clearRecordedData(),t.disableLogs||console.log("Cleared old recorded data.")):m()},getBlob:function(){if(f)return f.blob;m()},getDataURL:c,toURL:function(){if(f)return p.createObjectURL(f.blob);m()},getInternalRecorder:function(){return f},save:function(e){f?function(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var n=(e.type||"video/webm").split("/")[1];if(t&&-1!==t.indexOf(".")){var o=t.split(".");t=o[0],n=o[1]}var i=(t||Math.round(9999999999*Math.random())+888888888)+"."+n;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,i);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(e,i);var r=document.createElement("a");r.href=p.createObjectURL(e),r.download=i,r.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(r),"function"==typeof r.click?r.click():(r.target="_blank",r.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})));p.revokeObjectURL(r.href)}(f.blob,e):m()},getFromDisk:function(e){f?r.getFromDisk(t.type,e):m()},setAdvertisementArray:function(e){t.advertisement=[];for(var n=e.length,o=0;o<n;o++)t.advertisement.push({duration:o,image:e[o]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){f&&"function"==typeof f.clearRecordedData&&f.clearRecordedData(),f=null,l("inactive"),n.blob=null},onStateChanged:function(e){t.disableLogs||console.log("Recorder state changed:",e)},state:"inactive",getState:function(){return n.state},destroy:function(){var e=t.disableLogs;t={disableLogs:!0},n.reset(),l("destroyed"),g=n=null,S.AudioContextConstructor&&(S.AudioContextConstructor.close(),S.AudioContextConstructor=null),t.disableLogs=e,t.disableLogs||console.warn("RecordRTC is destroyed.")},version:"5.4.9"};if(!this)return n=g,g;for(var b in g)this[b]=g[b];return n=this,g}function a(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===I||t.recorderType===T?t.type="video":t.recorderType===A?t.type="gif":t.recorderType===L?t.type="audio":t.recorderType===C&&(e.getAudioTracks().length&&e.getVideoTracks().length?t.type="video":e.getAudioTracks().length&&!e.getVideoTracks().length?t.type="audio":!e.getAudioTracks().length&&e.getVideoTracks().length&&(t.type="audio"))),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}function s(e,t){var n;return(b||m||g)&&(n=L),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!b&&(n=C),"video"===t.type&&(b||g)&&(n=I),"gif"===t.type&&(n=A),"canvas"===t.type&&(n=T),R()&&n!==T&&n!==A&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(e.getVideoTracks&&e.getVideoTracks().length||e.getAudioTracks&&e.getAudioTracks().length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(n=C):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(n=C)),e instanceof Array&&e.length&&(n=P),t.recorderType&&(n=t.recorderType),!t.disableLogs&&n&&n.name&&console.log("Using recorderType:",n.name||n.constructor.name),n}function d(e){this.addStream=function(t){t&&(e=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var t,n=this.mediaType,o=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof n.audio&&R()&&e.getAudioTracks&&!e.getAudioTracks().length&&(n.audio=!1),"function"!=typeof n.video&&R()&&e.getVideoTracks&&!e.getVideoTracks().length&&(n.video=!1),"function"!=typeof n.gif&&R()&&e.getVideoTracks&&!e.getVideoTracks().length&&(n.gif=!1),!n.audio&&!n.video&&!n.gif)throw"MediaStream must have either audio or video tracks.";if(n.audio&&(t=null,"function"==typeof n.audio&&(t=n.audio),this.audioRecorder=new r(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:t,mimeType:o.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),n.video||this.audioRecorder.startRecording()),n.video){t=null,"function"==typeof n.video&&(t=n.video);var i=e;if(R()&&n.audio&&"function"==typeof n.audio){var a=e.getVideoTracks()[0];navigator.mozGetUserMedia?((i=new v).addTrack(a),t&&t===I&&(t=C)):i=new v([a])}this.videoRecorder=new r(i,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:t,mimeType:o.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),n.audio||this.videoRecorder.startRecording()}if(n.audio&&n.video){var s=this;R()?(s.audioRecorder=null,s.videoRecorder.startRecording()):s.videoRecorder.initRecorder(function(){s.audioRecorder.initRecorder(function(){s.videoRecorder.startRecording(),s.audioRecorder.startRecording()})})}n.gif&&(t=null,"function"==typeof n.gif&&(t=n.gif),this.gifRecorder=new r(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:t,mimeType:o.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(t){e(t,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(t){e(t,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(t){e(t,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),e&&e(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(e){function t(e,t){if("undefined"!=typeof Worker){var n=function(e){var t,n=p.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),o=new Worker(n);if(void 0!==p)t=p;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(n),o}(function(e){postMessage((new FileReaderSync).readAsDataURL(e))});n.onmessage=function(e){t(e.data)},n.postMessage(e)}else{var o=new FileReader;o.readAsDataURL(e),o.onload=function(e){t(e.target.result)}}}this.getBlob(function(n){n.audio&&n.video?t(n.audio,function(o){t(n.video,function(t){e({audio:o,video:t})})}):n.audio?t(n.audio,function(t){e({audio:t})}):n.video&&t(n.video,function(t){e({video:t})})})},this.writeToDisk=function(){r.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){(e=e||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof e.gif?e.gif:"")}}r.version="5.4.9",e.exports=r,void 0===(i=function(){return r}.apply(t,[]))||(e.exports=i),r.getFromDisk=function(e,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===e?"blobs":e+" blob ")+" from disk!"),M.Fetch(function(n,o){"all"!==e&&o===e+"Blob"&&t&&t(n),"all"===e&&t&&t(n,o.replace("Blob",""))})},r.writeToDisk=function(e){console.log("Writing recorded blob(s) to disk!"),(e=e||{}).audio&&e.video&&e.gif?e.audio.getDataURL(function(t){e.video.getDataURL(function(n){e.gif.getDataURL(function(e){M.Store({audioBlob:t,videoBlob:n,gifBlob:e})})})}):e.audio&&e.video?e.audio.getDataURL(function(t){e.video.getDataURL(function(e){M.Store({audioBlob:t,videoBlob:e})})}):e.audio&&e.gif?e.audio.getDataURL(function(t){e.gif.getDataURL(function(e){M.Store({audioBlob:t,gifBlob:e})})}):e.video&&e.gif?e.video.getDataURL(function(t){e.gif.getDataURL(function(e){M.Store({videoBlob:t,gifBlob:e})})}):e.audio?e.audio.getDataURL(function(e){M.Store({audioBlob:e})}):e.video?e.video.getDataURL(function(e){M.Store({videoBlob:e})}):e.gif&&e.gif.getDataURL(function(e){M.Store({gifBlob:e})})},d.getFromDisk=r.getFromDisk,d.writeToDisk=r.writeToDisk,r.MRecordRTC=d;var c;(c=void 0!==n?n:null)&&"undefined"==typeof window&&void 0!==n&&(n.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},n.console||(n.console={}),void 0!==n.console.log&&void 0!==n.console.error||(n.console.error=n.console.log=n.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(c.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return e},c.HTMLVideoElement=function(){}),"undefined"==typeof location&&(c.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(c.screen={width:0,height:0}),void 0===p&&(c.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),c.window=n);var u=window.requestAnimationFrame;if(void 0===u)if("undefined"!=typeof webkitRequestAnimationFrame)u=webkitRequestAnimationFrame;else if("undefined"!=typeof mozRequestAnimationFrame)u=mozRequestAnimationFrame;else if("undefined"!=typeof msRequestAnimationFrame)u=msRequestAnimationFrame;else if(void 0===u){var l=0;u=function(e,t){var n=(new Date).getTime(),o=Math.max(0,16-(n-l)),i=setTimeout(function(){e(n+o)},o);return l=n+o,i}}var f=window.cancelAnimationFrame;void 0===f&&("undefined"!=typeof webkitCancelAnimationFrame?f=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?f=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?f=msCancelAnimationFrame:void 0===f&&(f=function(e){clearTimeout(e)}));var h=window.AudioContext;void 0===h&&("undefined"!=typeof webkitAudioContext&&(h=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(h=mozAudioContext));var p=window.URL;void 0===p&&"undefined"!=typeof webkitURL&&(p=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var m=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),g=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),b=(-1!==navigator.userAgent.toLowerCase().indexOf("safari/")&&navigator.userAgent.toLowerCase().indexOf("chrome/"),!g&&!m&&!!navigator.webkitGetUserMedia||y()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/")),v=window.MediaStream;function w(e){if(0===e)return"0 Bytes";var t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function y(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||(!(void 0===o||"object"!=typeof o.versions||!o.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function x(e,t,n){if("srcObject"in t)t.srcObject=e;else if("mozSrcObject"in t)t.mozSrcObject=e;else if("createObjectURL"in p&&!n)try{t.src=p.createObjectURL(e)}catch(n){return void x(e,t,!0)}else alert("createObjectURL/srcObject both are not supported.")}void 0===v&&"undefined"!=typeof webkitMediaStream&&(v=webkitMediaStream),void 0!==v&&("getVideoTracks"in v.prototype||(v.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks().forEach(function(t){-1!==t.kind.toString().indexOf("video")&&e.push(t)}),e},v.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks().forEach(function(t){-1!==t.kind.toString().indexOf("audio")&&e.push(t)}),e}),void 0===v.prototype.stop&&(v.prototype.stop=function(){this.getTracks().forEach(function(e){e.stop()})}));var S={};function R(){var e=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t=!!window.chrome&&!e||y();if(void 0!==window.InstallTrigger)return!0;navigator.appVersion;var n,o,i=navigator.userAgent,r=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10);return(t||e)&&(n=i.indexOf("Chrome"),r=i.substring(n+7)),-1!==(o=r.indexOf(";"))&&(r=r.substring(0,o)),-1!==(o=r.indexOf(" "))&&(r=r.substring(0,o)),a=parseInt(""+r,10),isNaN(a)&&(r=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10)),a>=49}function C(e,t){var n=this;if(void 0===e)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not supports Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if("audio"===(t=t||{mimeType:"video/webm"}).type){var o;if(e.getVideoTracks().length&&e.getAudioTracks().length)navigator.mozGetUserMedia?(o=new v).addTrack(e.getAudioTracks()[0]):o=new v(e.getAudioTracks()),e=o;t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=b?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}var i,r=[];function a(){n.timestamps.push((new Date).getTime()),"function"==typeof t.onTimeStamp&&t.onTimeStamp(n.timestamps[n.timestamps.length-1],n.timestamps)}function s(e){return i&&i.mimeType?i.mimeType:e.mimeType||"video/webm"}function d(){r=[],i=null,n.timestamps=[]}this.getArrayOfBlobs=function(){return r},this.record=function(){n.blob=null,n.clearRecordedData(),n.timestamps=[],c=[],r=[];var o=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",o),i&&(i=null),b&&!R()&&(o="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&o.mimeType&&(MediaRecorder.isTypeSupported(o.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",o.mimeType),o.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{i=new MediaRecorder(e,o),t.mimeType=o.mimeType}catch(t){i=new MediaRecorder(e)}o.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in i&&!1===i.canRecordMimeType(o.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",o.mimeType)),i.ondataavailable=function(e){if(e.data&&c.push("ondataavailable: "+w(e.data.size)),"number"!=typeof t.timeSlice)!e.data||!e.data.size||e.data.size<100||n.blob?n.recordingCallback&&(n.recordingCallback(new Blob([],{type:s(o)})),n.recordingCallback=null):(n.blob=t.getNativeBlob?e.data:new Blob([e.data],{type:s(o)}),n.recordingCallback&&(n.recordingCallback(n.blob),n.recordingCallback=null));else if(e.data&&e.data.size&&e.data.size>100&&(r.push(e.data),a(),"function"==typeof t.ondataavailable)){var i=t.getNativeBlob?e.data:new Blob([e.data],{type:s(o)});t.ondataavailable(i)}},i.onstart=function(){c.push("started")},i.onpause=function(){c.push("paused")},i.onresume=function(){c.push("resumed")},i.onstop=function(){c.push("stopped")},i.onerror=function(e){e&&(e.name||(e.name="UnknownError"),c.push("error: "+e),t.disableLogs||(-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",o.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),function(e){if(!n.manuallyStopped&&i&&"inactive"===i.state)return delete t.timeslice,void i.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==i.state&&"stopped"!==i.state&&i.stop())},"number"==typeof t.timeSlice?(a(),i.start(t.timeSlice)):i.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},n.manuallyStopped=!0,i&&(this.recordingCallback=e,"recording"===i.state&&i.stop(),"number"==typeof t.timeSlice&&setTimeout(function(){n.blob=new Blob(r,{type:s(t)}),n.recordingCallback(n.blob)},100))},this.pause=function(){i&&"recording"===i.state&&i.pause()},this.resume=function(){i&&"paused"===i.state&&i.resume()},this.clearRecordedData=function(){i&&"recording"===i.state&&n.stop(d),d()},this.getInternalRecorder=function(){return i},this.blob=null,this.getState=function(){return i&&i.state||"inactive"};var c=[];this.getAllStates=function(){return c},void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1);n=this;!function o(){if(i&&!1!==t.checkForInactiveTracks)return!1===function(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}()?(t.disableLogs||console.log("MediaStream seems stopped."),void n.stop()):void setTimeout(o,1e3)}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function L(e,t){if(!e.getAudioTracks().length)throw"Your stream has no audio tracks.";var n,o=this,i=[],r=[],a=!1,s=0,d=2,c=(t=t||{}).desiredSampRate;function u(){if(!1===t.checkForInactiveTracks)return!0;if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function l(e,t){function n(e,t){var n,o=e.numberOfAudioChannels,i=e.leftBuffers.slice(0),r=e.rightBuffers.slice(0),a=e.sampleRate,s=e.internalInterleavedLength,d=e.desiredSampRate;function c(e,t,n){var o=Math.round(e.length*(t/n)),i=[],r=Number((e.length-1)/(o-1));i[0]=e[0];for(var a=1;a<o-1;a++){var s=a*r,d=Number(Math.floor(s)).toFixed(),c=Number(Math.ceil(s)).toFixed(),l=s-d;i[a]=u(e[d],e[c],l)}return i[o-1]=e[e.length-1],i}function u(e,t,n){return e+(t-e)*n}function l(e,t){for(var n=new Float64Array(t),o=0,i=e.length,r=0;r<i;r++){var a=e[r];n.set(a,o),o+=a.length}return n}function f(e,t,n){for(var o=n.length,i=0;i<o;i++)e.setUint8(t+i,n.charCodeAt(i))}2===o&&(i=l(i,s),r=l(r,s),d&&(i=c(i,d,a),r=c(r,d,a))),1===o&&(i=l(i,s),d&&(i=c(i,d,a))),d&&(a=d),2===o&&(n=function(e,t){for(var n=e.length+t.length,o=new Float64Array(n),i=0,r=0;r<n;)o[r++]=e[i],o[r++]=t[i],i++;return o}(i,r)),1===o&&(n=i);var h=n.length,p=new ArrayBuffer(44+2*h),m=new DataView(p);f(m,0,"RIFF"),m.setUint32(4,44+2*h,!0),f(m,8,"WAVE"),f(m,12,"fmt "),m.setUint32(16,16,!0),m.setUint16(20,1,!0),m.setUint16(22,o,!0),m.setUint32(24,a,!0),m.setUint32(28,2*a,!0),m.setUint16(32,2*o,!0),m.setUint16(34,16,!0),f(m,36,"data"),m.setUint32(40,2*h,!0);for(var g=h,b=44,v=0;v<g;v++)m.setInt16(b,32767*n[v],!0),b+=2;if(t)return t({buffer:p,view:m});postMessage({buffer:p,view:m})}if(e.noWorker)n(e,function(e){t(e.buffer,e.view)});else{var o,i,r,a=(o=n,i=p.createObjectURL(new Blob([o.toString(),";this.onmessage =  function (eee) {"+o.name+"(eee.data);}"],{type:"application/javascript"})),(r=new Worker(i)).workerURL=i,r);a.onmessage=function(e){t(e.data.buffer,e.data.view),p.revokeObjectURL(a.workerURL),a.terminate()},a.postMessage(e)}}if(!0===t.leftChannel&&(d=1),1===t.numberOfAudioChannels&&(d=1),(!d||d<1)&&(d=2),t.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+d),void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!0),this.record=function(){if(!1===u())throw"Please make sure MediaStream is active.";y(),S=w=!1,a=!0,void 0!==t.timeSlice&&C()},this.stop=function(e){e=e||function(){},a=!1,l({desiredSampRate:c,sampleRate:v,numberOfAudioChannels:d,internalInterleavedLength:s,leftBuffers:i,rightBuffers:1===d?[]:r,noWorker:t.noWorker},function(t,n){o.blob=new Blob([n],{type:"audio/wav"}),o.buffer=new ArrayBuffer(n.buffer.byteLength),o.view=n,o.sampleRate=c||v,o.bufferSize=b,o.length=s,S=!1,e&&e(o.blob)})},void 0===f)var f={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext};f.AudioContextConstructor||(f.AudioContextConstructor=new f.AudioContext);var h=f.AudioContextConstructor,m=h.createMediaStreamSource(e),g=[0,256,512,1024,2048,4096,8192,16384],b=void 0===t.bufferSize?4096:t.bufferSize;if(-1===g.indexOf(b)&&(t.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(g,null,"\t"))),h.createJavaScriptNode)n=h.createJavaScriptNode(b,d,d);else{if(!h.createScriptProcessor)throw"WebAudio API has no support on this browser.";n=h.createScriptProcessor(b,d,d)}m.connect(n),t.bufferSize||(b=n.bufferSize);var v=void 0!==t.sampleRate?t.sampleRate:h.sampleRate||44100;(v<22050||v>96e3)&&(t.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),t.disableLogs||t.desiredSampRate&&console.log("Desired sample-rate: "+t.desiredSampRate);var w=!1;function y(){i=[],r=[],s=0,S=!1,a=!1,w=!1,h=null,o.leftchannel=i,o.rightchannel=r,o.numberOfAudioChannels=d,o.desiredSampRate=c,o.sampleRate=v,o.recordingLength=s,R={left:[],right:[],recordingLength:0}}function x(){n&&(n.onaudioprocess=null,n.disconnect(),n=null),m&&(m.disconnect(),m=null),y()}this.pause=function(){w=!0},this.resume=function(){if(!1===u())throw"Please make sure MediaStream is active.";if(!a)return t.disableLogs||console.log("Seems recording has been restarted."),void this.record();w=!1},this.clearRecordedData=function(){t.checkForInactiveTracks=!1,a&&this.stop(x),x()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var S=!1;n.onaudioprocess=function(e){if(!w)if(!1===u()&&(t.disableLogs||console.log("MediaStream seems stopped."),n.disconnect(),a=!1),a){S||(S=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var c=e.inputBuffer.getChannelData(0);t.onLevel&&t.onLevel(function(e){for(var t,n=e.length,o=0,i=0;i<n;i++)t=e[i],o+=t*t;return Math.sqrt(o/n)}(c));var l=new Float32Array(c);if(i.push(l),2===d){var f=e.inputBuffer.getChannelData(1),h=new Float32Array(f);r.push(h)}s+=b,o.recordingLength=s,void 0!==t.timeSlice&&(R.recordingLength+=b,R.left.push(l),2===d&&R.right.push(h))}else m&&(m.disconnect(),m=null)},h.createMediaStreamDestination?n.connect(h.createMediaStreamDestination()):n.connect(h.destination),this.leftchannel=i,this.rightchannel=r,this.numberOfAudioChannels=d,this.desiredSampRate=c,this.sampleRate=v,o.recordingLength=s;var R={left:[],right:[],recordingLength:0};function C(){a&&"function"==typeof t.ondataavailable&&void 0!==t.timeSlice&&(R.left.length?(l({desiredSampRate:c,sampleRate:v,numberOfAudioChannels:d,internalInterleavedLength:R.recordingLength,leftBuffers:R.left,rightBuffers:1===d?[]:R.right},function(e,n){var o=new Blob([n],{type:"audio/wav"});t.ondataavailable(o),setTimeout(C,t.timeSlice)}),R={left:[],right:[],recordingLength:0}):setTimeout(C,t.timeSlice))}}function T(e,t){if("undefined"==typeof html2canvas)throw"Please link: https://cdn.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var n=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){e in document.createElement("canvas")&&(n=!0)});var o,i,r,a=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),s=50,d=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(a&&d&&d[2]&&(s=parseInt(d[2],10)),a&&s<52&&(n=!1),t.useWhammyRecorder&&(n=!1),n)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),e instanceof HTMLCanvasElement)o=e;else{if(!(e instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";o=e.canvas}else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(r=!0,n&&!t.useWhammyRecorder){var e;"captureStream"in o?e=o.captureStream(25):"mozCaptureStream"in o?e=o.mozCaptureStream(25):"webkitCaptureStream"in o&&(e=o.webkitCaptureStream(25));try{var a=new v;a.addTrack(e.getVideoTracks()[0]),e=a}catch(e){}if(!e)throw"captureStream API are NOT available.";(i=new C(e,{mimeType:"video/webm"})).record()}else h.frames=[],f=(new Date).getTime(),l();t.initCallback&&t.initCallback()},this.getWebPImages=function(n){if("canvas"===e.nodeName.toLowerCase()){var o=h.frames.length;h.frames.forEach(function(e,n){var i=o-n;t.disableLogs||console.log(i+"/"+o+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(i,o);var r=e.image.toDataURL("image/webp",1);h.frames[n].image=r}),t.disableLogs||console.log("Generating WebM"),n()}else n()},this.stop=function(e){r=!1;var o=this;n&&i?i.stop(e):this.getWebPImages(function(){h.compile(function(n){t.disableLogs||console.log("Recording finished!"),o.blob=n,o.blob.forEach&&(o.blob=new Blob([],{type:"video/webm"})),e&&e(o.blob),h.frames=[]})})};var c=!1;function u(){h.frames=[],r=!1,c=!1}function l(){if(c)return f=(new Date).getTime(),setTimeout(l,500);if("canvas"===e.nodeName.toLowerCase()){var n=(new Date).getTime()-f;return f=(new Date).getTime(),h.frames.push({image:(o=document.createElement("canvas"),i=o.getContext("2d"),o.width=e.width,o.height=e.height,i.drawImage(e,0,0),o),duration:n}),void(r&&setTimeout(l,t.frameInterval))}var o,i;html2canvas(e,{grabMouse:void 0===t.showMousePointer||t.showMousePointer,onrendered:function(e){var n=(new Date).getTime()-f;if(!n)return setTimeout(l,t.frameInterval);f=(new Date).getTime(),h.frames.push({image:e.toDataURL("image/webp",1),duration:n}),r&&setTimeout(l,t.frameInterval)}})}this.pause=function(){c=!0,i instanceof C&&i.pause()},this.resume=function(){c=!1,i instanceof C?i.resume():r||this.record()},this.clearRecordedData=function(){r&&this.stop(u),u()},this.name="CanvasRecorder",this.toString=function(){return this.name};var f=(new Date).getTime(),h=new k.Video(100)}function I(e,t){function n(e){e=void 0!==e?e:10;var t=(new Date).getTime()-d;return t?r?(d=(new Date).getTime(),setTimeout(n,100)):(d=(new Date).getTime(),s.paused&&s.play(),l.drawImage(s,0,0,u.width,u.height),c.frames.push({duration:t,image:u.toDataURL("image/webp")}),void(i||setTimeout(n,e,e))):setTimeout(n,e,e)}function o(e,t,n,o,i){var r=document.createElement("canvas");r.width=u.width,r.height=u.height;var a,s,d,c=r.getContext("2d"),l=[],f=-1===t,h=t&&t>0&&t<=e.length?t:e.length,p=0,m=0,g=0,b=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),v=n&&n>=0&&n<=1?n:0,w=o&&o>=0&&o<=1?o:0,y=!1;s=-1,d=(a={length:h,functionToLoop:function(t,n){var o,i,r,a=function(){!y&&r-o<=r*w||(f&&(y=!0),l.push(e[n])),t()};if(y)a();else{var s=new Image;s.onload=function(){c.drawImage(s,0,0,u.width,u.height);var e=c.getImageData(0,0,u.width,u.height);o=0,i=e.data.length,r=e.data.length/4;for(var t=0;t<i;t+=4){var n={r:e.data[t],g:e.data[t+1],b:e.data[t+2]};Math.sqrt(Math.pow(n.r-p,2)+Math.pow(n.g-m,2)+Math.pow(n.b-g,2))<=b*v&&o++}a()},s.src=e[n].image}},callback:function(){(l=l.concat(e.slice(h))).length<=0&&l.push(e[e.length-1]),i(l)}}).length,function e(){++s!==d?setTimeout(function(){a.functionToLoop(e,s)},1):a.callback()}()}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),u.width=t.canvas.width||320,u.height=t.canvas.height||240,l=u.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(s=t.video.cloneNode(),t.initCallback&&t.initCallback()):((s=document.createElement("video")).setAttribute("playsinline",!0),s.setAttribute("controls",!0),setTimeout(()=>{s.removeAttribute("controls")}),x(e,s),s.onloadedmetadata=function(){t.initCallback&&t.initCallback()},s.width=t.video.width,s.height=t.video.height),s.muted=!0,s.play(),d=(new Date).getTime(),c=new k.Video,t.disableLogs||(console.log("canvas resolutions",u.width,"*",u.height),console.log("video width/height",s.width||u.width,"*",s.height||u.height)),n(t.frameInterval)};var i=!1;this.stop=function(e){e=e||function(){},i=!0;var n=this;setTimeout(function(){o(c.frames,-1,null,null,function(o){c.frames=o,t.advertisement&&t.advertisement.length&&(c.frames=t.advertisement.concat(c.frames)),c.compile(function(t){n.blob=t,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),e&&e(n.blob)})})},10)};var r=!1;function a(){c.frames=[],i=!0,r=!1}this.pause=function(){r=!0},this.resume=function(){r=!1,i&&this.record()},this.clearRecordedData=function(){i||this.stop(a),a()},this.name="WhammyRecorder",this.toString=function(){return this.name};var s,d,c,u=document.createElement("canvas"),l=u.getContext("2d")}void 0!==h?S.AudioContext=h:"undefined"!=typeof webkitAudioContext&&(S.AudioContext=webkitAudioContext),r.Storage=S,r.MediaStreamRecorder=C,r.StereoAudioRecorder=L,r.CanvasRecorder=T,r.WhammyRecorder=I;var k=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function t(e){function t(e,t,n){return[{data:e,id:231}].concat(n.map(function(e){var n=function(e){var t=0;e.keyframe&&(t|=128);e.invisible&&(t|=8);e.lacing&&(t|=e.lacing<<1);e.discardable&&(t|=1);if(e.trackNum>127)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map(function(e){return String.fromCharCode(e)}).join("")+e.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:n,id:163}}))}function n(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function o(e){var t=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var n=0;n<e.length;n+=8)t.push(parseInt(e.substr(n,8),2));return new Uint8Array(t)}function i(e,t){return parseInt(e.substr(t+4,4).split("").map(function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t}).join(""),2)}var r=new function(e){var i=function(e){if(e[0]){for(var t=e[0].width,n=e[0].height,o=e[0].duration,i=1;i<e.length;i++)o+=e[i].duration;return{duration:o,width:t,height:n}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}(e);if(!i)return[];for(var r,a=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(r=i.duration,[].slice.call(new Uint8Array(new Float64Array([r]).buffer),0).map(function(e){return String.fromCharCode(e)}).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:i.width,id:176},{data:i.height,id:186}]}]}]}]}],s=0,d=0;s<e.length;){var c=[],u=0;do{c.push(e[s]),u+=e[s].duration,s++}while(s<e.length&&u<3e4);var l={id:524531317,data:t(d,0,c)};a[1].data.push(l),d+=u}return function e(t){for(var i=[],r=0;r<t.length;r++){var a=t[r].data;"object"==typeof a&&(a=e(a)),"number"==typeof a&&(a=o(a.toString(2))),"string"==typeof a&&(a=new Uint8Array(a.split("").map(function(e){return e.charCodeAt(0)})));var s=a.size||a.byteLength||a.length,d=Math.ceil(Math.ceil(Math.log(s)/Math.log(2))/8),c=s.toString(2),u=new Array(7*d+7+1-c.length).join("0")+c,l=new Array(d).join("0")+"1"+u;i.push(n(t[r].id)),i.push(o(l)),i.push(a)}return new Blob(i,{type:"video/webm"})}(a)}(e.map(function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],n=t.indexOf("Â*"),o=0,i=[];o<4;o++)i[o]=t.charCodeAt(n+3+o);return{width:16383&(i[1]<<8|i[0]),height:16383&(i[3]<<8|i[2]),data:t,riff:e}}(function e(t){for(var n=0,o={};n<t.length;){var r=t.substr(n,4),a=i(t,n),s=t.substr(n+4+4,a);n+=8+a,o[r]=o[r]||[],"RIFF"===r||"LIST"===r?o[r].push(e(s)):o[r].push(s)}return o}(atob(e.image.slice(23))));return t.duration=e.duration,t}));postMessage(r)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var n,o,i,r=(n=t,o=p.createObjectURL(new Blob([n.toString(),"this.onmessage =  function (e) {"+n.name+"(e.data);}"],{type:"application/javascript"})),i=new Worker(o),p.revokeObjectURL(o),i);r.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data)},r.postMessage(this.frames)},{Video:e}}();r.Whammy=k;var M={init:function(){var e=this;if("undefined"!=typeof indexedDB&&void 0!==indexedDB.open){var t,n=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),o=indexedDB.open(n,1);o.onerror=e.onError,o.onsuccess=function(){((t=o.result).onerror=e.onError,t.setVersion)?1!==t.version?t.setVersion(1).onsuccess=function(){i(t),r()}:r():r()},o.onupgradeneeded=function(e){i(e.target.result)}}else console.error("IndexedDB API are not available in this browser.");function i(t){t.createObjectStore(e.dataStoreName)}function r(){var n=t.transaction([e.dataStoreName],"readwrite");function o(t){n.objectStore(e.dataStoreName).get(t).onsuccess=function(n){e.callback&&e.callback(n.target.result,t)}}e.videoBlob&&n.objectStore(e.dataStoreName).put(e.videoBlob,"videoBlob"),e.gifBlob&&n.objectStore(e.dataStoreName).put(e.gifBlob,"gifBlob"),e.audioBlob&&n.objectStore(e.dataStoreName).put(e.audioBlob,"audioBlob"),o("audioBlob"),o("videoBlob"),o("gifBlob")}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){console.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function A(e,t){if("undefined"==typeof GIFEncoder){var n=document.createElement("script");n.src="https://cdn.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(n)}t=t||{};var o=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){"undefined"!=typeof GIFEncoder&&s?(o||(t.width||(t.width=d.offsetWidth||320),t.height||(t.height=d.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),r.width=t.canvas.width||320,r.height=t.canvas.height||240,d.width=t.video.width||320,d.height=t.video.height||240),(l=new GIFEncoder).setRepeat(0),l.setDelay(t.frameRate||200),l.setQuality(t.quality||10),l.start(),"function"==typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),Date.now(),h=u(function e(n){if(!0!==p.clearedRecordedData){if(i)return setTimeout(function(){e(n)},100);h=u(e),void 0===typeof c&&(c=n),n-c<90||(!o&&d.paused&&d.play(),o||a.drawImage(d,0,0,r.width,r.height),t.onGifPreview&&t.onGifPreview(r.toDataURL("image/png")),l.addFrame(a),c=n)}}),t.initCallback&&t.initCallback()):setTimeout(p.record,1e3)},this.stop=function(e){e=e||function(){},h&&f(h),Date.now(),this.blob=new Blob([new Uint8Array(l.stream().bin)],{type:"image/gif"}),e(this.blob),l.stream().bin=[]};var i=!1;this.pause=function(){i=!0},this.resume=function(){i=!1},this.clearRecordedData=function(){p.clearedRecordedData=!0,l&&(l.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var r=document.createElement("canvas"),a=r.getContext("2d");o&&(e instanceof CanvasRenderingContext2D?r=(a=e).canvas:e instanceof HTMLCanvasElement&&(a=e.getContext("2d"),r=e));var s=!0;if(!o){var d=document.createElement("video");d.setAttribute("playsinline",!0),d.setAttribute("controls",!0),setTimeout(()=>{d.removeAttribute("controls")}),d.muted=!0,d.autoplay=!0,s=!1,d.onloadedmetadata=function(){s=!0},x(e,d),d.play()}var c,l,h=null,p=this}function O(e){var t=[],n=!1,o=document.createElement("canvas"),i=o.getContext("2d");o.style="opacity:0;position:absolute;z-index:-1;top: -100000000;left:-1000000000; margin-top:-1000000000;margin-left:-1000000000;",(document.body||document.documentElement).appendChild(o),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var r=this,a=window.AudioContext;void 0===a&&("undefined"!=typeof webkitAudioContext&&(a=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(a=mozAudioContext));var s=window.URL;void 0===s&&"undefined"!=typeof webkitURL&&(s=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var d=window.MediaStream;void 0===d&&"undefined"!=typeof webkitMediaStream&&(d=webkitMediaStream),void 0!==d&&("getVideoTracks"in d.prototype||(d.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach(function(t){-1!==t.kind.toString().indexOf("video")&&e.push(t)}),e},d.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach(function(t){-1!==t.kind.toString().indexOf("audio")&&e.push(t)}),e}),void 0===d.prototype.stop&&(d.prototype.stop=function(){this.getTracks().forEach(function(e){e.stop()})}));var c={};function u(){if(!n){var e=t.length,i=!1,a=[];if(t.forEach(function(e){e.stream||(e.stream={}),e.stream.fullcanvas?i=e:a.push(e)}),i)o.width=i.stream.width,o.height=i.stream.height;else if(a.length){o.width=e>1?2*a[0].width:a[0].width;var s=1;3!==e&&4!==e||(s=2),5!==e&&6!==e||(s=3),7!==e&&8!==e||(s=4),9!==e&&10!==e||(s=5),o.height=a[0].height*s}else o.width=r.width||360,o.height=r.height||240;i&&i instanceof HTMLVideoElement&&l(i),a.forEach(function(e,t){l(e,t)}),setTimeout(u,r.frameInterval)}}function l(e,t){if(!n){var o=0,r=0,a=e.width,s=e.height;1===t&&(o=e.width),2===t&&(r=e.height),3===t&&(o=e.width,r=e.height),4===t&&(r=2*e.height),5===t&&(o=e.width,r=2*e.height),6===t&&(r=3*e.height),7===t&&(o=e.width,r=3*e.height),void 0!==e.stream.left&&(o=e.stream.left),void 0!==e.stream.top&&(r=e.stream.top),void 0!==e.stream.width&&(a=e.stream.width),void 0!==e.stream.height&&(s=e.stream.height),i.drawImage(e,o,r,a,s),"function"==typeof e.stream.onRender&&e.stream.onRender(i,o,r,a,s,t)}}function f(e){var t=document.createElement("video");return t.setAttribute("playsinline",!0),t.setAttribute("controls",!0),setTimeout(()=>{t.removeAttribute("controls")}),function e(t,n,o){if("createObjectURL"in s&&!o)try{n.src=s.createObjectURL(t)}catch(o){return void e(t,n,!0)}else"srcObject"in n?n.srcObject=t:"mozSrcObject"in n?n.mozSrcObject=t:alert("createObjectURL/srcObject both are not supported.")}(e,t),t.muted=!0,t.volume=0,t.width=e.width||r.width||360,t.height=e.height||r.height||240,t.play(),t}function h(n){t=[],(n=n||e).forEach(function(e){if(e.getVideoTracks().length){var n=f(e);n.stream=e,t.push(n)}})}void 0!==a?c.AudioContext=a:"undefined"!=typeof webkitAudioContext&&(c.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){u()},this.appendStreams=function(n){if(!n)throw"First parameter is required.";n instanceof Array||(n=[n]),e.concat(n),n.forEach(function(e){if(e.getVideoTracks().length){var n=f(e);n.stream=e,t.push(n)}if(e.getAudioTracks().length&&r.audioContext){var o=r.audioContext.createMediaStreamSource(e);o.connect(r.audioDestination),r.audioSources.push(o)}})},this.releaseStreams=function(){t=[],n=!0,r.gainNode&&(r.gainNode.disconnect(),r.gainNode=null),r.audioSources.length&&(r.audioSources.forEach(function(e){e.disconnect()}),r.audioSources=[]),r.audioDestination&&(r.audioDestination.disconnect(),r.audioDestination=null),r.audioContext&&r.audioContext.close(),r.audioContext=null,i.clearRect(0,0,o.width,o.height),o.stream&&(o.stream.stop(),o.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),h(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){n=!1;var t=function(){var e;h(),"captureStream"in o?e=o.captureStream():"mozCaptureStream"in o?e=o.mozCaptureStream():r.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new d;return e.getVideoTracks().forEach(function(e){t.addTrack(e)}),o.stream=t,t}(),i=function(){c.AudioContextConstructor||(c.AudioContextConstructor=new c.AudioContext),r.audioContext=c.AudioContextConstructor,r.audioSources=[],!0===r.useGainNode&&(r.gainNode=r.audioContext.createGain(),r.gainNode.connect(r.audioContext.destination),r.gainNode.gain.value=0);var t=0;if(e.forEach(function(e){if(e.getAudioTracks().length){t++;var n=r.audioContext.createMediaStreamSource(e);!0===r.useGainNode&&n.connect(r.gainNode),r.audioSources.push(n)}}),t)return r.audioDestination=r.audioContext.createMediaStreamDestination(),r.audioSources.forEach(function(e){e.connect(r.audioDestination)}),r.audioDestination.stream}();return i&&i.getAudioTracks().forEach(function(e){t.addTrack(e)}),e.forEach(function(e){e.fullcanvas}),t}}function P(e,t){e=e||[];var n,o,i=this;(t=t||{mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){var i;n=new O(e),(i=[],e.forEach(function(e){e.getVideoTracks().forEach(function(e){i.push(e)})}),i).length&&(n.frameInterval=t.frameInterval||10,n.width=t.video.width||360,n.height=t.video.height||240,n.startDrawingFrames()),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(n.getMixedStream()),(o=new C(n.getMixedStream(),t)).record()},this.stop=function(e){o&&o.stop(function(t){i.blob=t,e(t),i.clearRecordedData()})},this.pause=function(){o&&o.pause()},this.resume=function(){o&&o.resume()},this.clearRecordedData=function(){o&&(o.clearRecordedData(),o=null),n&&(n.releaseStreams(),n=null)},this.addStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),e.concat(t),o&&n&&n.appendStreams(t)},this.resetVideoStreams=function(e){n&&(!e||e instanceof Array||(e=[e]),n.resetVideoStreams(e))},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}r.DiskStorage=M,r.GifRecorder=A,r.MultiStreamRecorder=P,r.RecordRTCPromisesHandler=function(e,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===e)throw'First argument "MediaStream" is required.';var n=this;n.recordRTC=new r(e,t),this.startRecording=function(){return new Promise(function(e,t){try{n.recordRTC.startRecording(),e()}catch(e){t(e)}})},this.stopRecording=function(){return new Promise(function(e,t){try{n.recordRTC.stopRecording(function(t){n.blob=n.recordRTC.getBlob(),e(t)})}catch(e){t(e)}})},this.getDataURL=function(e){return new Promise(function(e,t){try{n.recordRTC.getDataURL(function(t){e(t)})}catch(e){t(e)}})},this.getBlob=function(){return n.recordRTC.getBlob()},this.blob=null}}).call(this,n(1),n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n,o,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var d,c=[],u=!1,l=-1;function f(){u&&d&&(u=!1,d.length?c=d.concat(c):l=-1,c.length&&h())}function h(){if(!u){var e=s(f);u=!0;for(var t=c.length;t;){for(d=c,c=[];++l<t;)d&&d[l].run();l=-1,t=c.length}d=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var o=n(4);"string"==typeof o&&(o=[[e.i,o,""]]);var i={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};n(6)(o,i);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(5)(!1)).push([e.i,'@charset "UTF-8";\n/* Breakpoint variables */\n/* Mixins */\n/**\n * Use them like that:\n * .some-cool-selector {\n *   @mixin media-lg {\n *     color: white;\n *   }\n * }\n*/\n@font-face {\n  font-family: "Helvetica Neue";\n  src: url("https://devapp.3back.ai/assets/fonts/helvetica_medium.woff");\n  font-weight: 500;\n  font-style: normal; }\n\n/*\n * Class for blocking client site scrolling on mobile version,\n * when chat view is expanded.\n *\n * Fixed will remove scrolling state,\n * be prepared to return scrolling progress back\n*/\nbody.tb-widget-mobile-expanded {\n  overflow: hidden !important;\n  height: 100% !important;\n  width: 100% !important;\n  position: fixed !important;\n  margin: 0 !important;\n  left: 0 !important; }\n\n.tb-widget[name="xz35ehp0"] {\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  display: flex;\n  align-items: flex-end;\n  z-index: 2147483647;\n  /**\n  * Themes section:\n  *\n  * How to adding themes ðŸŒˆ for script objects:\n  * 1) Create folder in /styles `name-theme` (e.g. /styles/lime-theme)\n  * 2) Add files with overrides\n  * 3) Create theme selector here (e.g. .lime-theme)\n  * 4) Import all override files inside\n\n    For example:\n    .lime-theme {\n      @import "./lime-theme/index";\n    };\n  */ }\n  @media only screen and (max-width: 575px) {\n    .tb-widget[name="xz35ehp0"].open {\n      top: 0;\n      right: 0;\n      left: 0;\n      bottom: 0;\n      width: 100%;\n      height: 100%; } }\n  @media only screen and (max-width: 575px) {\n    .tb-widget[name="xz35ehp0"].open .tb-button {\n      display: none; } }\n  @media only screen and (max-width: 575px) {\n    .tb-widget[name="xz35ehp0"].fullscreen.open {\n      position: absolute;\n      bottom: auto; } }\n  .tb-widget[name="xz35ehp0"].iphone-scrolling.open {\n    padding-right: 0; }\n    .tb-widget[name="xz35ehp0"].iphone-scrolling.open .tb-button {\n      display: none; }\n      .tb-widget[name="xz35ehp0"].iphone-scrolling.open .tb-button:before, .tb-widget[name="xz35ehp0"].iphone-scrolling.open .tb-button:after {\n        display: none; }\n    .tb-widget[name="xz35ehp0"].iphone-scrolling.open .input-container {\n      position: fixed;\n      bottom: 0;\n      left: 0;\n      box-sizing: border-box;\n      width: 100%; }\n      .tb-widget[name="xz35ehp0"].iphone-scrolling.open .input-container iframe {\n        width: 100%;\n        height: 100%; }\n\n@keyframes fadeOut {\n  from {\n    opacity: 1; }\n  to {\n    opacity: 0;\n    transform: translateY(10%) scale(0.9); } }\n  .tb-widget[name="xz35ehp0"] .fade-out {\n    animation-name: fadeOut;\n    animation-duration: 0.2s; }\n\n@keyframes zoomIn {\n  from {\n    opacity: 0;\n    transform: translateY(10%) scale(0.9); } }\n  .tb-widget[name="xz35ehp0"] .zoom-in {\n    animation-name: zoomIn;\n    animation-duration: 0.2s; }\n\n@keyframes lds-dual-ring {\n  0% {\n    transform: rotate(0deg); }\n  100% {\n    transform: rotate(360deg); } }\n  .tb-widget[name="xz35ehp0"] .lds-dual-ring {\n    display: inline-block;\n    width: 100px;\n    height: 100px; }\n    .tb-widget[name="xz35ehp0"] .lds-dual-ring:after {\n      content: " ";\n      display: block;\n      width: 72px;\n      height: 72px;\n      margin: 1px;\n      border-radius: 50%;\n      border: 10px solid #1ea9ef;\n      border-color: #1ea9ef transparent #1ea9ef transparent;\n      animation: lds-dual-ring 1.2s linear infinite; }\n  .tb-widget[name="xz35ehp0"] .tb-button {\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n    border: none;\n    outline: none;\n    position: absolute;\n    background-color: transparent;\n    right: 14px;\n    bottom: 14px;\n    display: flex;\n    align-items: flex-end;\n    cursor: pointer;\n    overflow: hidden;\n    padding: 10px;\n    z-index: 10; }\n    .tb-widget[name="xz35ehp0"] .tb-button.visible {\n      opacity: 1; }\n    .tb-widget[name="xz35ehp0"] .tb-button .top-bubble {\n      position: relative;\n      width: 54px;\n      height: 54px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      transition: 0.2s;\n      border-radius: 5000px;\n      opacity: 0; }\n      .tb-widget[name="xz35ehp0"] .tb-button .top-bubble__bubble {\n        box-shadow: 0 0 12px rgba(0, 0, 0, 0.3);\n        background-color: white;\n        transition: 0.2s;\n        position: absolute;\n        border-radius: 5000px;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        top: 0;\n        opacity: 0.85;\n        z-index: -1; }\n      .tb-widget[name="xz35ehp0"] .tb-button .top-bubble__bubble:after {\n        content: "";\n        position: absolute;\n        bottom: 0;\n        left: 0px;\n        border-width: 11px 7px 0;\n        border-style: solid;\n        border-color: white #0000;\n        display: block;\n        width: 0;\n        transform: rotate(41deg); }\n      .tb-widget[name="xz35ehp0"] .tb-button .top-bubble__content {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: 15px;\n        font-family: "Helvetica Neue";\n        font-weight: 500;\n        line-height: 20px;\n        color: #27C46A; }\n      .tb-widget[name="xz35ehp0"] .tb-button .top-bubble__dots {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        position: absolute;\n        transition: 0.2s; }\n      .tb-widget[name="xz35ehp0"] .tb-button .top-bubble__dots > div {\n        width: 6px;\n        height: 6px;\n        background-color: #27C46A;\n        margin-right: 6px;\n        border-radius: 5000px; }\n        .tb-widget[name="xz35ehp0"] .tb-button .top-bubble__dots > div:last-child {\n          margin-right: 0; }\n      .tb-widget[name="xz35ehp0"] .tb-button .top-bubble__description {\n        position: absolute;\n        opacity: 0;\n        transition: 0.2s;\n        /* pointer-events: none; */ }\n    .tb-widget[name="xz35ehp0"] .tb-button .bottom-bubble {\n      width: 60px;\n      height: 60px;\n      background-color: #27C46A;\n      position: relative;\n      border-radius: 5000px;\n      margin-left: -26px;\n      /* position: absolute; */\n      /* top: 16px;\n    right: 0px; */\n      z-index: -10;\n      display: flex;\n      justify-content: center;\n      align-content: center;\n      position: relative;\n      transition: 0.2s;\n      box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.15); }\n      .tb-widget[name="xz35ehp0"] .tb-button .bottom-bubble:after {\n        transition: 0.2s;\n        content: "";\n        position: absolute;\n        bottom: 0;\n        left: 30.1px;\n        border-width: 8px 5px 0;\n        border-style: solid;\n        border-color: #27C46A #0000;\n        display: block;\n        width: 0;\n        opacity: 0;\n        transform: rotate(-45deg); }\n      .tb-widget[name="xz35ehp0"] .tb-button .bottom-bubble__dots {\n        display: flex;\n        position: absolute;\n        opacity: 0;\n        transition: 0.2s;\n        top: calc(50% - 2px); }\n        @media only screen and (max-width: 575px) {\n          .tb-widget[name="xz35ehp0"] .tb-button .bottom-bubble__dots {\n            top: calc(50% - 4px); } }\n      .tb-widget[name="xz35ehp0"] .tb-button .bottom-bubble__dots > div {\n        width: 4px;\n        height: 4px;\n        background-color: white;\n        margin-right: 2px;\n        border-radius: 5000px;\n        filter: blur(1px); }\n        .tb-widget[name="xz35ehp0"] .tb-button .bottom-bubble__dots > div:last-child {\n          filter: blur(0px);\n          margin-right: 0px; }\n      .tb-widget[name="xz35ehp0"] .tb-button .bottom-bubble__cross-icon {\n        position: absolute;\n        opacity: 1;\n        transition: 0.2s;\n        top: calc(50% - 7px); }\n    .tb-widget[name="xz35ehp0"] .tb-button:hover .top-bubble {\n      width: 100px; }\n      @media only screen and (max-width: 575px) {\n        .tb-widget[name="xz35ehp0"] .tb-button:hover .top-bubble {\n          width: 54px; } }\n    .tb-widget[name="xz35ehp0"] .tb-button:hover .top-bubble__dots {\n      opacity: 0; }\n      @media only screen and (max-width: 575px) {\n        .tb-widget[name="xz35ehp0"] .tb-button:hover .top-bubble__dots {\n          opacity: 1; } }\n    .tb-widget[name="xz35ehp0"] .tb-button:hover .top-bubble__description {\n      opacity: 1; }\n      @media only screen and (max-width: 575px) {\n        .tb-widget[name="xz35ehp0"] .tb-button:hover .top-bubble__description {\n          opacity: 0; } }\n    .tb-widget[name="xz35ehp0"] .tb-button.visible .bottom-bubble__cross-icon {\n      opacity: 0; }\n    .tb-widget[name="xz35ehp0"] .tb-button.visible .bottom-bubble {\n      height: 40px;\n      width: 40px; }\n    .tb-widget[name="xz35ehp0"] .tb-button.visible .top-bubble {\n      opacity: 1;\n      transform: translateX(0%); }\n    .tb-widget[name="xz35ehp0"] .tb-button.visible .bottom-bubble:after {\n      opacity: 1; }\n    .tb-widget[name="xz35ehp0"] .tb-button.visible .bottom-bubble__dots {\n      opacity: 1; }\n  .tb-widget[name="xz35ehp0"] .tb-widget-iframe-container {\n    width: 376px;\n    max-height: 520px;\n    height: calc(100% - 143px);\n    box-shadow: 0px 2px 12px 0px rgba(0, 0, 0, 0.15);\n    background-color: white;\n    border-radius: 12px;\n    position: fixed;\n    right: 24px;\n    bottom: 115px;\n    z-index: 100;\n    overflow: hidden; }\n    .tb-widget[name="xz35ehp0"] .tb-widget-iframe-container.init {\n      visibility: hidden !important;\n      width: 0 !important;\n      height: 0 !important;\n      max-height: 0 !important;\n      min-height: 0 !important; }\n    @media only screen and (max-width: 575px) {\n      .tb-widget[name="xz35ehp0"] .tb-widget-iframe-container {\n        width: 100%;\n        height: 100%;\n        max-height: unset;\n        position: static;\n        border-radius: 0; } }\n    .tb-widget[name="xz35ehp0"] .tb-widget-iframe-container__loading-spinner {\n      flex-grow: 1;\n      align-self: center;\n      display: flex;\n      justify-content: center;\n      align-content: center; }\n  .tb-widget[name="xz35ehp0"] .tb-widget-iframe {\n    width: 100%;\n    height: 100%;\n    border: none;\n    border-radius: 12px; }\n    @media only screen and (max-width: 575px) {\n      .tb-widget[name="xz35ehp0"] .tb-widget-iframe {\n        border-radius: 0; } }\n  .tb-widget[name="xz35ehp0"] .input-container iframe {\n    width: 100%;\n    border: none; }\n  .tb-widget[name="xz35ehp0"] .tb-widget-iframe-wrapper {\n    width: 100%;\n    height: 100%;\n    border-radius: 12px;\n    overflow: hidden; }\n  .tb-widget[name="xz35ehp0"].blue-theme .tb-button {\n    background-color: #163561; }\n  .tb-widget[name="xz35ehp0"] .tb-widget-shade {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.15);\n    pointer-events: none;\n    display: none; }\n  .tb-widget[name="xz35ehp0"].open > .tb-widget-shade {\n    display: block; }\n    @media only screen and (max-width: 575px) {\n      .tb-widget[name="xz35ehp0"].open > .tb-widget-shade {\n        display: none; } }\n  .tb-widget[name="xz35ehp0"] .tb-widget-arrow {\n    bottom: 86px;\n    right: 39px;\n    position: absolute;\n    display: block;\n    width: 50px;\n    height: 30px;\n    background-image: url("data:image/svg+xml,%3C%3Fxml version=\'1.0\' encoding=\'UTF-8\'%3F%3E%3Csvg style=\'\' version=\'1.1\' viewBox=\'0 0 50 30\' xmlns=\'http://www.w3.org/2000/svg\' xmlns:xlink=\'http://www.w3.org/1999/xlink\'%3E%3Crect class=\'selected\' width=\'100%25\' height=\'100%25\' fill=\'none\' style=\'\'/%3E%3Cdefs%3E%3Cpath id=\'a\' d=\'m41.023-0.014381c0 6-9 20-12 20s0-20-29-20h41z\'/%3E%3Cfilter id=\'b\' x=\'0\' y=\'0\' width=\'150%25\' height=\'140%25\'%3E%3CfeOffset dx=\'0\' dy=\'0\' in=\'SourceAlpha\' result=\'shadowOffsetOuter1\'/%3E%3CfeGaussianBlur in=\'shadowOffsetOuter1\' result=\'shadowBlurOuter1\' stdDeviation=\'6\'/%3E%3CfeColorMatrix in=\'shadowBlurOuter1\' values=\'0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0\'/%3E%3C/filter%3E%3C/defs%3E%3Cg class=\'currentLayer\' style=\'\'%3E%3Ctitle%3ELayer 1%3C/title%3E%3Cg class=\'\' fill=\'none\' fill-rule=\'evenodd\'%3E%3Cuse x=\'-0.02280712127685547\' y=\'0.014380455017089844\' fill=\'black\' filter=\'url(%23b)\' xlink:href=\'%23a\'/%3E%3Cuse x=\'-0.02280712127685547\' y=\'0.014380455017089844\' fill=\'%23FFFFFF\' fill-rule=\'evenodd\' xlink:href=\'%23a\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A");\n    background-repeat: no-repeat;\n    background-position: right bottom;\n    z-index: 101;\n    display: none; }\n  @media only screen and (max-width: 575px) {\n    .tb-widget[name="xz35ehp0"].open > .tb-widget-arrow {\n      display: none !important; } }\n',""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=(a=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),r=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[n].concat(r).concat([i]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];null!=r&&(o[r]=!0)}for(i=0;i<e.length;i++){var a=e[i];null!=a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var o,i,r={},a=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=o.apply(this,arguments)),i}),s=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var o=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}}(),d=null,c=0,u=[],l=n(7);function f(e,t){for(var n=0;n<e.length;n++){var o=e[n],i=r[o.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](o.parts[a]);for(;a<o.parts.length;a++)i.parts.push(v(o.parts[a],t))}else{var s=[];for(a=0;a<o.parts.length;a++)s.push(v(o.parts[a],t));r[o.id]={id:o.id,refs:1,parts:s}}}}function h(e,t){for(var n=[],o={},i=0;i<e.length;i++){var r=e[i],a=t.base?r[0]+t.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};o[a]?o[a].parts.push(s):n.push(o[a]={id:a,parts:[s]})}return n}function p(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=u[u.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertAt.before,n);n.insertBefore(t,i)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var o=function(){0;return n.nc}();o&&(e.attrs.nonce=o)}return b(t,e.attrs),p(e,t),t}function b(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,o,i,r;if(t.transform&&e.css){if(!(r="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=r}if(t.singleton){var a=c++;n=d||(d=g(t)),o=x.bind(null,n,a,!1),i=x.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),p(e,t),t}(t),o=function(e,t,n){var o=n.css,i=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||r)&&(o=l(o));i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([o],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),o=function(e,t){var n=t.css,o=t.media;o&&e.setAttribute("media",o);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){m(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return f(n,t),function(e){for(var o=[],i=0;i<n.length;i++){var a=n[i];(s=r[a.id]).refs--,o.push(s)}e&&f(h(e,t),t);for(i=0;i<o.length;i++){var s;if(0===(s=o[i]).refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete r[s.id]}}}};var w,y=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function x(e,t,n,o){var i=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var r=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(i=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){"use strict";n.r(t);var o,i,r=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(){function e(){this.parentListeners=new Map,this.childrenListeners=new Map}return e.prototype.init=function(){console.log("Connector inited.")},e.prototype.addParentListener=function(e,t){this.parentListeners.set(e,t)},e.prototype.addChildrenListener=function(e,t){this.childrenListeners.set(e,t)},e}(),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.sendToParent=function(e,t){void 0===t&&(t={});var n=this.parentListeners.get(e);return n?n.onMessage(t):Promise.reject(new Error("parent listener '"+e+"' not found"))},t.prototype.sendToChildren=function(e,t){void 0===t&&(t={});var n=this.childrenListeners.get(e);return n?n.onMessage(t):Promise.reject(new Error("children listener '"+e+"' not found"))},t}(a),d=function(e){function t(){var t,n=e.call(this)||this;return n.answers=new Map,n.currentAnswerId=1,t=function(e){var t=e.data.name;if(t){var o={};if(e.data.info&&(o.info=e.data.info),e.data.data&&(o.data=e.data.data),e.data.answerId){var i=n.answers.get(e.data.answerId);i&&(n.answers.delete(e.data.answerId),e.data.err?i.reject(new Error(e.data.err)):i.resolve(o))}else e.data.reqId?n.onMessage(t,o).then(function(t){n.sendAnswer(e,t)}).catch(function(t){n.sendError(e,t)}):t&&n.onMessage(t,o)}},window.addEventListener("message",t),n}return r(t,e),t.prototype.sendRequest=function(e,t,n,o,i){var r=this,a={resolve:o,reject:i},s=this.currentAnswerId++;this.answers.set(s,a),setTimeout(function(){r.answers.has(s)&&(r.answers.delete(s),a.reject(new Error("postMessage '"+t+"' answer timeout")))},3e4),n.data?e.postMessage({reqId:s,name:t,info:n.info,data:n.data},"*",[n.data]):e.postMessage({reqId:s,name:t,info:n.info},"*")},t.prototype.sendAnswer=function(e,t){t.data?e.source.postMessage({answerId:e.data.reqId,name:"answer",info:t.info,data:t.data},"*",[t.data]):e.source.postMessage({answerId:e.data.reqId,name:"answer",info:t.info},"*")},t.prototype.sendError=function(e,t){console.log(t),e.source.postMessage({answerId:e.data.reqId,err:t.message},"*")},t}(a),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onMessage=function(e,t){void 0===t&&(t={});var n=this.parentListeners.get(e);return n?n.onMessage(t):Promise.reject(new Error("Parent method "+e+" not found"))},t.prototype.sendToParent=function(e,t){void 0===t&&(t={});var n=new Error("Parent send message to parent "+e+", "+t);return console.log(n),Promise.reject(n)},t.prototype.sendToChildren=function(e,t){var n=this;return void 0===t&&(t={}),new Promise(function(o,i){var r=window.TBWidget.iframe;n.sendRequest(r.contentWindow,e,t,o,i)})},t}(d),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onMessage=function(e,t){void 0===t&&(t={});var n=this.childrenListeners.get(e);return n?n.onMessage(t):Promise.reject(new Error("Children method "+e+" not found"))},t.prototype.sendToParent=function(e,t){var n=this;return void 0===t&&(t={}),new Promise(function(o,i){n.sendRequest(window.parent,e,t,o,i)})},t.prototype.sendToChildren=function(e,t){void 0===t&&(t={});var n=new Error("Children send message to children "+e+", "+t);return console.log(n),Promise.reject(n)},t}(d);function l(){return i||(i=function(){try{return window.self!==window.top}catch(e){return!0}}()?new u:window.TBWidget?new c:new s),i}var f,h={setItem:"localStorageSetItem",getItem:"localStorageGetItem",removeItem:"localStorageRemoveItem"},p=function(){function e(){}return e.prototype.setItem=function(e,t){return void 0===t&&(t=null),localStorage.setItem(e,t),Promise.resolve()},e.prototype.getItem=function(e){return Promise.resolve(localStorage.getItem(e))},e.prototype.removeItem=function(e){return localStorage.removeItem(e),Promise.resolve()},e}();var m=n(0);var g,b={init:"audioRecorderInit",stop:"audioRecorderStop",startCapture:"audioRecorderStartCapture",stopCapture:"audioRecorderStopCapture",getBlob:"audioRecorderGetBlob"},v="audioRecorderOnLevel",w=function(){function e(){this.webcamstream=null,this.options={video:!1,audio:!0},this.blob=null}return e.prototype.initStreamIfNeed=function(){var e=this;return this.webcamstream?Promise.resolve():window.navigator.mediaDevices.getUserMedia(this.options).then(function(t){e.webcamstream=t})},e.prototype.init=function(){return this.initStreamIfNeed()},e.prototype.stop=function(){return this.webcamstream&&(this.webcamstream.stop(),this.webcamstream=null),Promise.resolve()},e.prototype.startCapture=function(){var e=this;return this.initStreamIfNeed().then(function(){e.blob=null;var t={type:"audio",recorderType:m.StereoAudioRecorder,numberOfAudioChannels:1,disableLogs:!0,onLevel:function(e){l().sendToChildren(v,{info:e})}};e.streamRecorder=m(e.webcamstream,t),e.streamRecorder.startRecording()})},e.prototype.stopCapture=function(){var e=this;return new Promise(function(t,n){e.streamRecorder.stopRecording(function(){e.blob=e.streamRecorder.getBlob(),e.streamRecorder=null,e.stop(),t()})})},e.prototype.getBlob=function(){var e=this;return new Promise(function(t,n){var o=new FileReader;o.addEventListener("loadend",function(e){t(o.result)}),o.addEventListener("error",n),null!=e.blob&&o.readAsArrayBuffer(e.blob)})},e}();var y,x={clearAll:"fileStorageClearAll",getFilePart:"fileStorageGetFilePart",delFilePart:"fileStorageDelFilePart",putFilePart:"fileStoragePutFilePart",getFileInfo:"fileStorageGetFileInfo",delFileInfo:"fileStorageDelFileInfo",putFileInfo:"fileStoragePutFileInfo"},S=window,R=function(){function e(){this.indexedDB=S.indexedDB||S.mozIndexedDB||S.webkitIndexedDB||S.msIndexedDB,this.IDBTransaction=S.IDBTransaction||S.webkitIDBTransaction||S.msIDBTransaction,this.baseName="filesBase",this.storeName="filePartStore",this.storeInfoName="fileInfoStore"}return e.prototype.connectDB=function(){var e=this;return new Promise(function(t,n){var o=e.indexedDB.open(e.baseName,1);o.onerror=function(e){n(e)},o.onsuccess=function(){t(o.result)},o.onupgradeneeded=function(n){n.currentTarget.result.createObjectStore(e.storeName,{keyPath:"id",autoIncrement:!0}),n.currentTarget.result.createObjectStore(e.storeInfoName,{keyPath:"id",autoIncrement:!0}),t(e.connectDB())}})},e.prototype.clearAll=function(){var e=this;return this.connectDB().then(function(t){var n=t.transaction([e.storeName],"readwrite").objectStore(e.storeName).clear(),o=t.transaction([e.storeInfoName],"readwrite").objectStore(e.storeInfoName).clear();n.onerror=function(e){console.log(e)},n.onsuccess=function(){console.debug(e.storeName+" cleared")},o.onerror=function(e){console.log(e)},o.onsuccess=function(){console.debug(e.storeInfoName+" cleared")}})},e.prototype.getFilePart=function(e){var t=this;return this.connectDB().then(function(n){return new Promise(function(o,i){var r=n.transaction([t.storeName],"readonly").objectStore(t.storeName).get(Number(e));r.onerror=i,r.onsuccess=function(){o(r.result?r.result.part:null)}})})},e.prototype.delFilePart=function(e){var t=this;return this.connectDB().then(function(n){return new Promise(function(o,i){var r=n.transaction([t.storeName],"readwrite").objectStore(t.storeName).delete(Number(e));r.onerror=i,r.onsuccess=function(){console.debug("File deleted from DB:",e),o()}})})},e.prototype.putFilePart=function(e){var t=this;return this.connectDB().then(function(n){return new Promise(function(o,i){var r=n.transaction([t.storeName],"readwrite").objectStore(t.storeName).put({part:e});r.onerror=i,r.onsuccess=function(){o(r.result?r.result:null)}})})},e.prototype.getFileInfo=function(e){var t=this;return this.connectDB().then(function(n){return new Promise(function(o,i){var r=n.transaction([t.storeInfoName],"readonly").objectStore(t.storeInfoName).get(Number(e));r.onerror=i,r.onsuccess=function(){o(r.result?r.result.info:null)}})})},e.prototype.delFileInfo=function(e){var t=this;return this.connectDB().then(function(n){return new Promise(function(o,i){var r=n.transaction([t.storeInfoName],"readwrite").objectStore(t.storeInfoName).delete(Number(e));r.onerror=i,r.onsuccess=function(){console.debug("Info delete from DB:",e),o()}})})},e.prototype.putFileInfo=function(e){var t=this;return this.connectDB().then(function(n){return new Promise(function(o,i){var r=n.transaction([t.storeInfoName],"readwrite").objectStore(t.storeInfoName).put({info:e});r.onerror=i,r.onsuccess=function(){o(r.result?r.result:null)}})})},e}();var C,L=576;!function(e){e.default="default",e.blue="blue"}(C||(C={}));var T,I={company:"3back",widgetUrl:"https://webapp.3back.ai",useIphoneScrolling:!1,theme:C.default},k={get:"configGet"},M=function(){function e(){this.config=I;var e=/(?:\?|&)hashcode=([^&]+)/.exec(window.location.search);e&&e[1]&&(this.config.hashcode=e[1]);var t=/(?:\?|&)theme=([^&]+)/.exec(window.location.search);t&&t[1]&&"blue"===t[1]&&(this.config.theme=C.blue),this.config.isMobile=document.documentElement.clientWidth<L}return e.prototype.set=function(e){this.config=e},e.prototype.get=function(){return Promise.resolve(this.config)},e}();function A(){T||(T=new M,l().addParentListener(k.get,{onMessage:function(e){return T.get().then(function(e){return{info:e}})}}),console.log("config started"));return T}var O,P=function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function s(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}d((o=o.apply(e,t||[])).next())})},B=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},F={close:"widgetClose",onLoad:"widgetOnLoad",setIframeHeight:"widgetSetIframeHeight",showInput:"widgetShowInput",hideInput:"widgetHideInput",messageFromInput:"widgetMessageFromInput"},E="widgetOnInputAnswer",U="widgetOnOpen",D="widgetOnClose",z=function(){function e(){this.closeListeners=[],this.loadListeners=[],this.inputFrameContainer=null,this.iFrame=null,this.inputReqId=0,this.head="",this.body=""}return e.prototype.addOnCloseListener=function(e){return this.closeListeners.push(e),this},e.prototype.addOnLoadListener=function(e){return this.loadListeners.push(e),this},e.prototype.setInputFrameContainer=function(e){return this.inputFrameContainer=e,this},e.prototype.close=function(){return this.closeListeners.forEach(function(e){return e()}),Promise.resolve()},e.prototype.onLoad=function(){return this.loadListeners.forEach(function(e){return e()}),Promise.resolve()},e.prototype.openWidget=function(){l().sendToChildren(U,{})},e.prototype.closeWidget=function(){l().sendToChildren(D,{})},e.prototype.showInput=function(e,t,n){return P(this,void 0,void 0,function(){var o;return B(this,function(i){switch(i.label){case 0:return[4,A().get()];case 1:return o=i.sent(),this.inputFrameContainer&&this.iFrame&&(this.iFrame=document.createElement("iframe"),this.iFrame.src=o.widgetUrl+"/input.html",this.inputFrameContainer.innerHTML="",this.head=e,this.body=t,this.inputReqId=n,this.inputFrameContainer.appendChild(this.iFrame),this.inputFrameContainer.style.display="block"),[2]}})})},e.prototype.hideInput=function(){var e=this;if(this.inputFrameContainer&&this.iFrame){this.iFrame.style.transition="100ms ease-in-out transform",this.iFrame.style.transform="translateY(150%)";var t=function(){e.inputFrameContainer&&e.iFrame&&(e.iFrame.removeEventListener("animationend",t),e.inputFrameContainer.style.display="none")};this.iFrame.addEventListener("animationend",t)}return Promise.resolve()},e.prototype.messageFromInput=function(e){return this.iFrame&&this.iFrame.contentWindow&&("load"===e.type&&this.iFrame.contentWindow.postMessage({name:"show",head:this.head,body:this.body},"*"),"height"===e.type&&(this.iFrame.style.height=e.height+"px"),"answer"===e.type&&l().sendToChildren(E,{info:{reqId:this.inputReqId,message:e.message}})),Promise.resolve()},e}();var _,j={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},N={setIframeHeight:"domUtilsSetIframeHeight",scrollToY:"domUtilsScrollToY",stopScrolling:"domUtilsStopScrolling"},H="domUtilsOnScrollMethodChanged";!function(e){e.LOCAL="local",e.PARENT="parent"}(_||(_={}));var W,G=function(){function e(){this.iframeHeightListeners=[],this.isScrolling=!1,this.currentScrolling=Promise.resolve()}return e.prototype.addOnIframeHeightChangeListener=function(e){return this.iframeHeightListeners.push(e),this},e.prototype.setIframeHeight=function(e){return this.iframeHeightListeners.forEach(function(t){return t(e)}),Promise.resolve()},e.prototype.scrollToY=function(e,t,n){var o=this;void 0===t&&(t=0),void 0===n&&(n="linear"),console.log("scrollToY "+e),(e-=window.innerHeight)<0&&(e=0);var i=window.pageYOffset,r="now"in window.performance?performance.now():(new Date).getTime();return this.isScrolling=!1,this.currentScrolling=this.currentScrolling.then(function(){if("requestAnimationFrame"in window!=!1&&0!=t)return o.isScrolling=!0,new Promise(function(a,s){var d=function(){if(o.isScrolling){var s=document.documentElement.scrollHeight-window.innerHeight;s<e&&(e=s);var c="now"in window.performance?performance.now():(new Date).getTime(),u=Math.min(1,(c-r)/t),l=j[n](u);if(window.scroll(0,Math.ceil(l*(e-i)+i)),Math.abs(window.pageYOffset-e)<1)return void a();window.requestAnimationFrame(d)}};d()});window.scroll(0,e)}).then(function(){o.isScrolling=!1,o.currentScrolling=Promise.resolve()}),this.currentScrolling},e.prototype.stopScrolling=function(){return this.isScrolling=!1,Promise.resolve()},e.prototype.setScrollMethod=function(e){l().sendToChildren(H,{info:e})},e}();var q,V=function(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild};!function(e){e[e.IPHONE=0]="IPHONE",e[e.DESKTOP=1]="DESKTOP"}(q||(q={}));var Y=function(){return window.matchMedia("only screen and (max-width: 575px)").matches?q.IPHONE:q.DESKTOP},Q=function(){return(Q=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},J=function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function s(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}d((o=o.apply(e,t||[])).next())})},K=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},X={widgetUrl:I.widgetUrl,hiddenOnStart:!1,blurredElements:[],useIphoneScrolling:I.useIphoneScrolling,widgetContainerId:"tb-widget",widgetIframeIdContainer:"tb-widget-iframe",widgetIframeId:"tb-widget-iframe",widgetButtonId:"tb-widget-open-btn",widgetBodyMobileClass:"tb-widget-mobile-expanded"},$={widgetUrl:"https://devwidget.3back.ai"};function Z(e,t,n){var o=(void 0===n?{}:n).theme,i=void 0===o?C.default:o,r=document.getElementById(e);return r||((r=document.createElement("div")).setAttribute("id",e),r.classList.add("tb-widget"),t&&r.classList.add("iphone-scrolling"),i!==C.default&&r.classList.add(i+"-theme"),r.setAttribute("name","xz35ehp0"),document.body.appendChild(r)),r}var ee=function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function s(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}d((o=o.apply(e,t||[])).next())})},te=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},ne=function(){function e(e){this._instance=null,this.config=e}return e.prototype.init=function(){this._instance=this.config.button||this.createButton()},Object.defineProperty(e.prototype,"initialized",{get:function(){return!!this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInitialized",{get:function(){return!!this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHidden",{get:function(){return"block"!==this._instance.style.display},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeButton()},e.prototype.showButton=function(){this._instance.style.display="block"},e.prototype.hideButton=function(){this._instance.style.display="none"},e.prototype.addEvent=function(e,t){this._instance.addEventListener(e,t)},e.prototype.toOpenState=function(){return ee(this,void 0,void 0,function(){return te(this,function(e){return this._instance.classList.remove("visible"),[2]})})},e.prototype.toCloseState=function(){return ee(this,void 0,void 0,function(){return te(this,function(e){return this._instance.classList.add("visible"),[2]})})},e.prototype.createButton=function(){var e='\n      <button id="'+this.config.widgetButtonId+'" class="tb-button visible">\n        <div class="top-bubble">\n          <div class="top-bubble__bubble"></div>\n          <div class="top-bubble__content">\n            <div class="top-bubble__dots">\n              <div></div>\n              <div></div>\n              <div></div>\n            </div>\n            <div class="top-bubble__description">\n              Help\n            </div>\n          </div>\n        </div>\n\n        <div class="bottom-bubble">\n          <div class="bottom-bubble__dots">\n            <div></div>\n            <div></div>\n            <div></div>\n          </div>\n          <div class="bottom-bubble__cross-icon">\n            <svg width="14px" height="14px" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <g id="Desktop" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                <g id="1.0-Desktop-Selection-Single-Bubble" transform="translate(-1343.000000, -971.000000)">\n                  <g id="ic-/-close" transform="translate(1338.000000, 966.000000)">\n                    <g id="baseline-close-24px">\n                      <polygon id="Path" fill="#FFFFFF" points="19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12"></polygon>\n                      <polygon id="Path" points="0 0 24 0 24 24 0 24"></polygon>\n                    </g>\n                  </g>\n                </g>\n              </g>\n            </svg>\n          </div>\n        </div>\n      </button>\n    ',t=V(e);return this.config.container.appendChild(t),t},e.prototype.removeButton=function(){this.isInitialized&&this._instance.remove()},e}(),oe="zoom-in",ie="fade-out",re=function(e){return function(t,n){return new Promise(function(o,i){t.addEventListener("animationend",function e(){t.removeEventListener("animationend",e),o()}),e(t,n)})}},ae=function(e){return function(t,n){return new Promise(function(o,i){t.addEventListener("transitionend",function e(){t.removeEventListener("transitionend",e),o()}),e(t,n)})}},se=re(function(e,t){return e.classList.add(t)}),de=(ae(function(e,t){return e.classList.add(t)}),ae(function(e,t){return e.parentElement.classList.add(t)}),re(function(e,t){return e.classList.remove(t)}),ae(function(e,t){return e.classList.remove(t)}),ae(function(e,t){return e.parentElement.classList.remove(t)}),function(e,t){return se(e,t).then(function(){return e.classList.remove(t)})}),ce=function(e,t){return de(e,t).then(function(){return e.style.display="none"})},ue=function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function s(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}d((o=o.apply(e,t||[])).next())})},le=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},fe="none",he="flex",pe=function(){function e(e){this._iframeContainer=null,this._arrow=null,this._iframe=null,this._inputContainer=null,this.loaded=!1,this.loadedResolve=null,this.fullScreen=!1,this.isMobile=!1,this.config=e}return e.prototype.init=function(){return ue(this,void 0,void 0,function(){var e=this;return le(this,function(t){return this.loaded?[2,Promise.resolve()]:(this.loadedResolve&&this.loadedResolve(),this.loadedPromise?[2,this.loadedPromise]:(this.loadedPromise=new Promise(function(t,n){e.isMobile=Y()==q.IPHONE,e.useIphoneScrolling=e.config.useIphoneScrolling&&e.isMobile;var o=document.createElement("div");o.classList.add("tb-widget-shade"),e.config.container.appendChild(o),e._arrow=document.createElement("div"),e._arrow.classList.add("tb-widget-arrow"),e.config.container.appendChild(e._arrow),e._iframeContainer=e.createIframe(e.config),e.config.container.appendChild(e._iframeContainer),e._iframeContainer.classList.add("init"),e.loadedResolve=t}).then(function(){e.loadedPromise=null,e.loadedResolve=null,e.loaded=!0,e._iframeContainer.classList.remove("init"),e._iframeContainer.style.display=he,e.isMobile||(e._arrow.style.display=he)}),[2]))})})},e.prototype.hideIframe=function(){return ue(this,void 0,void 0,function(){return le(this,function(e){switch(e.label){case 0:return this.isBodyFreezed()&&this.unfreezeBody(),this.isMobile?[4,ce(this._iframeContainer,ie)]:[3,2];case 1:return e.sent(),[3,4];case 2:return[4,Promise.all([ce(this._iframeContainer,ie),ce(this._arrow,ie)])];case 3:e.sent(),e.label=4;case 4:return[2]}})})},e.prototype.showIframe=function(){return ue(this,void 0,void 0,function(){var e=this;return le(this,function(t){switch(t.label){case 0:return this.loaded?[3,2]:[4,this.init()];case 1:t.sent(),t.label=2;case 2:return this._iframeContainer.style.display=he,this.isMobile?de(this._iframeContainer,oe).then(function(){e.isMobile&&!e.useIphoneScrolling&&e.freezeBody()}):(this._arrow.style.display=he,Promise.all([de(this._arrow,oe),de(this._iframeContainer,oe)]).then(function(){e.isMobile&&!e.useIphoneScrolling&&e.freezeBody()})),[2]}})})},e.prototype.setLoadingState=function(){this.loadedResolve&&this.loadedResolve()},Object.defineProperty(e.prototype,"iframe",{get:function(){return this._iframe},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputContainer",{get:function(){return this._inputContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInitialized",{get:function(){return this.loaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHidden",{get:function(){return!this.loaded||this._iframeContainer.style.display===fe},enumerable:!0,configurable:!0}),e.prototype.createIframeContainer=function(e){var t=document.createElement("div");return t.setAttribute("id",e.widgetContainerId+"121"),t.classList.add("tb-widget-iframe-container"),t},e.prototype.createIframe=function(e){var t=this.createIframeContainer(e),n=document.createElement("iframe");return n.classList.add("tb-widget-iframe"),n.setAttribute("src",e.widgetUrl),n.setAttribute("id",e.widgetIframeId),t.appendChild(n),this.useIphoneScrolling&&(this._inputContainer=document.createElement("div"),this._inputContainer.classList.add("input-container"),t.appendChild(this._inputContainer),this.onChangeInputContainer&&this.onChangeInputContainer(this._inputContainer)),this._iframe=n,t},e.prototype.setLoading=function(){this.iframe.style.display=fe},e.prototype.setNormal=function(){this.iframe.style.display=he},e.prototype.createLoadingSpinner=function(){return V('\n      <div class="tb-widget-iframe-container__loading-spinner">\n        <div class="lds-dual-ring"></div>\n      </div>\n    ')},e.prototype.changeFullScreen=function(e){var t=this;if(this.useIphoneScrolling){var n="data-style-LjoQFTPgBYqGH0xH";if(!this.fullScreen&&e){this.fullScreen=!0,this.onChangeScrollMethod("parent"),this.saveBodyScrollPosition(),this.config.container.classList.add("fullscreen");for(var o=0;o<document.body.children.length;o++){(i=document.body.children[o]).getAttribute("id")!=this.config.widgetContainerId&&(i.getAttribute("style")&&i.setAttribute(n,i.getAttribute("style")),i.setAttribute("style","display: none"))}}if(this.fullScreen&&!e){this.fullScreen=!1,this.onChangeScrollMethod("local"),this.config.container.classList.remove("fullscreen");for(o=0;o<document.body.children.length;o++){var i;(i=document.body.children[o]).getAttribute("id")!=this.config.widgetContainerId&&(i.getAttribute(n)?i.setAttribute("style",i.getAttribute(n)):i.removeAttribute("style"))}setTimeout(function(){t.restoreBodyScrollPosition()},100)}}},e.prototype.setHeight=function(e){this.useIphoneScrolling&&(console.log("setHeight "+e+" "+this.fullScreen),this.fullScreen&&(e?this.config.container.style.height=e+"px":(this.changeFullScreen(!1),this.config.container.style.height="100%")),!this.fullScreen&&e&&(this.changeFullScreen(!0),this.config.container.style.height=e+"px"))},e.prototype.freezeBody=function(){this.saveBodyScrollPosition(),this.addFreezeMeta(),this.fixBodyForMobile()},e.prototype.unfreezeBody=function(){this.removeBodyFix(),this.removeFreezeMeta(),this.restoreBodyScrollPosition()},e.prototype.isBodyFreezed=function(){return document.body.classList.contains("tb-widget-mobile-expanded")},e.prototype.fixBodyForMobile=function(){this.isBodyFreezed()||document.body.classList.add("tb-widget-mobile-expanded")},e.prototype.removeBodyFix=function(){this.isBodyFreezed()&&document.body.classList.remove("tb-widget-mobile-expanded")},e.prototype.saveBodyScrollPosition=function(){this.scrollPositionX=window.pageXOffset,this.scrollPositionY=window.pageYOffset},e.prototype.restoreBodyScrollPosition=function(){window.scroll(this.scrollPositionX,this.scrollPositionY)},e.prototype.createMetaForFreeze=function(){var e=document.createElement("meta");return e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0"),e.setAttribute("id","tb-widget-freeze-meta"),e},Object.defineProperty(e.prototype,"isFreezeMetaEnabled",{get:function(){return!!document.getElementById("tb-widget-freeze-meta")},enumerable:!0,configurable:!0}),e.prototype.addFreezeMeta=function(){if(!this.isFreezeMetaEnabled){var e=this.createMetaForFreeze();document.head.appendChild(e)}},e.prototype.removeFreezeMeta=function(){this.isFreezeMetaEnabled&&document.getElementById("tb-widget-freeze-meta").remove()},e}(),me=function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function s(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}d((o=o.apply(e,t||[])).next())})},ge=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},be=function(){function e(e){this._button=null,this._iframe=null,this.openWidgetCb=function(){},this.closeWidgetCb=function(){},this.config=e,this._button=new ne(e),this._iframe=new pe(e)}return e.prototype.init=function(){this._iframe.init()},e.prototype.openWidget=function(){return me(this,void 0,void 0,function(){return ge(this,function(e){switch(e.label){case 0:return this.config.blurredElements.forEach(function(e){return e.classList.add("checkit-blurred-section")}),[4,this._iframe.showIframe()];case 1:return e.sent(),this._button.toOpenState(),this.config.container.classList.add("open"),this.openWidgetCb(),[2]}})})},e.prototype.closeWidget=function(){return me(this,void 0,void 0,function(){return ge(this,function(e){switch(e.label){case 0:return this.config.blurredElements.forEach(function(e){return e.classList.remove("checkit-blurred-section")}),[4,Promise.all([this._button.toCloseState(),this._iframe.hideIframe()])];case 1:return e.sent(),this.config.container.classList.remove("open"),this.closeWidgetCb(),[2]}})})},e.prototype.initButton=function(){var e=this;this._button.init(),this._button.addEvent("click",function(){e._iframe.isHidden?e.openWidget():e.closeWidget()})},Object.defineProperty(e.prototype,"iframe",{get:function(){return this._iframe.iframe},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputContainer",{get:function(){return this._iframe.inputContainer},enumerable:!0,configurable:!0}),e.prototype.setLoadingState=function(){this._button.initialized||this.initButton()},e.prototype.setIframeHeight=function(e){this._iframe.setHeight(e)},e.prototype.setOnChangeScrollMethod=function(e){return this._iframe.onChangeScrollMethod=e,this},e.prototype.setOnChangeInputContainer=function(e){return this._iframe.onChangeInputContainer=e,this},e.prototype.setOnOpenWidget=function(e){return this.openWidgetCb=e,this},e.prototype.setOnCloseWidget=function(e){return this.closeWidgetCb=e,this},e}();window.TBWidget=!0,function(){return J(this,void 0,void 0,function(){var e,t,n,o,i,r,a,s,d,c,u,l,f,h;return K(this,function(p){switch(p.label){case 0:e=window.tbwidgetConfig,p.label=1;case 1:return p.trys.push([1,3,,4]),t=document.currentScript.getAttribute("src"),n=new URL(t),(o=n.searchParams.get("hashcode"))&&(e={hashcode:o}),i=e||{},r=void 0,r=$.widgetUrl,a=i.widgetContainerId||X.widgetContainerId,s=(void 0===i.useIphoneScrolling?X.useIphoneScrolling:i.useIphoneScrolling)&&Y()==q.IPHONE,d=i.theme||C.default,[4,(c=A()).get()];case 2:return u=p.sent(),l=Q({},u,{useIphoneScrolling:s,widgetUrl:r,theme:d,hashcode:i.hashcode||null}),c.set(l),h=s||!i.container?Z(a,s,{theme:d}):i.container,[2,{widgetUrl:r,hiddenOnStart:i.hiddenOnStart||X.hiddenOnStart,widgetContainerId:a,widgetIframeId:i.widgetIframeId||X.widgetIframeId,widgetButtonId:i.widgetButtonId||X.widgetButtonId,blurredElements:i.blurredElements||X.blurredElements,useIphoneScrolling:s,container:h,button:i.button,widgetIframeIdContainer:X.widgetIframeIdContainer,iframeConfig:l,widgetBodyMobileClass:X.widgetBodyMobileClass,theme:d}];case 3:return f=p.sent(),console.error("Config build error",f),X.useIphoneScrolling=X.useIphoneScrolling&&Y()==q.IPHONE,h=Z(X.widgetContainerId,X.useIphoneScrolling),[2,Q({},X,{iframeConfig:I,container:h})];case 4:return[2]}})})}().then(function(e){var t=new be(e);t.init(),window.TBWidget=t,function(){if(!f){f=new p;var e=l();e.addParentListener(h.setItem,{onMessage:function(e){return f.setItem(e.info.name,e.info.value).then(function(){return{}})}}),e.addParentListener(h.getItem,{onMessage:function(e){return f.getItem(e.info.name).then(function(e){return{info:e}})}}),e.addParentListener(h.removeItem,{onMessage:function(e){return f.removeItem(e.info.name).then(function(){return{}})}}),console.log("localStorage started")}}(),function(){if(!g){g=new w;var e=l();e.addParentListener(b.init,{onMessage:function(e){return g.init().then(function(){return{}})}}),e.addParentListener(b.stop,{onMessage:function(e){return g.stop().then(function(){return{}})}}),e.addParentListener(b.startCapture,{onMessage:function(e){return g.startCapture().then(function(){return{}})}}),e.addParentListener(b.stopCapture,{onMessage:function(e){return g.stopCapture().then(function(){return{}})}}),e.addParentListener(b.getBlob,{onMessage:function(e){return g.getBlob().then(function(e){return{data:e}})}}),console.log("audio recorder started")}}(),function(){if(!y){y=new R;var e=l();e.addParentListener(x.clearAll,{onMessage:function(e){return y.clearAll().then(function(e){return{}})}}),e.addParentListener(x.getFilePart,{onMessage:function(e){return y.getFilePart(e.info).then(function(e){return{data:e}})}}),e.addParentListener(x.delFilePart,{onMessage:function(e){return y.delFilePart(e.info).then(function(){return{}})}}),e.addParentListener(x.putFilePart,{onMessage:function(e){return y.putFilePart(e.data).then(function(e){return{info:e}})}}),e.addParentListener(x.getFileInfo,{onMessage:function(e){return y.getFileInfo(e.info).then(function(e){return{info:e}})}}),e.addParentListener(x.delFileInfo,{onMessage:function(e){return y.delFileInfo(e.info).then(function(){return{}})}}),e.addParentListener(x.putFileInfo,{onMessage:function(e){return y.putFileInfo(e.info).then(function(e){return{info:e}})}}),console.log("file storage started")}}();var n=function(){if(!O){O=new z;var e=l();e.addParentListener(F.close,{onMessage:function(e){return O.close().then(function(){return{}})}}),e.addParentListener(F.onLoad,{onMessage:function(e){return O.onLoad().then(function(){return{}})}}),e.addParentListener(F.showInput,{onMessage:function(e){return O.showInput(e.info.head,e.info.body,e.info.reqId).then(function(){return{}})}}),e.addParentListener(F.hideInput,{onMessage:function(e){return O.hideInput().then(function(){return{}})}}),e.addParentListener(F.messageFromInput,{onMessage:function(e){return O.messageFromInput(e.info).then(function(){return{}})}}),console.log("widget started")}return O}().addOnCloseListener(function(){return t.closeWidget()}).addOnLoadListener(function(){return t.setLoadingState()}),o=function(){if(!W){W=new G;var e=l();e.addParentListener(N.setIframeHeight,{onMessage:function(e){return W.setIframeHeight(e.info).then(function(){return{}})}}),e.addParentListener(N.scrollToY,{onMessage:function(e){return W.scrollToY(e.info.destinationOffsetToScroll,e.info.duration,e.info.easing).then(function(){return{}})}}),e.addParentListener(N.stopScrolling,{onMessage:function(e){return W.stopScrolling().then(function(){return{}})}}),console.log("dom utils started")}return W}().addOnIframeHeightChangeListener(function(e){return t.setIframeHeight(e)});t.setOnOpenWidget(function(){return n.openWidget()}).setOnCloseWidget(function(){return n.closeWidget()}).setOnChangeScrollMethod(function(e){o.setScrollMethod(e)}).setOnChangeInputContainer(function(e){n.setInputFrameContainer(e)})});n(3)}]);